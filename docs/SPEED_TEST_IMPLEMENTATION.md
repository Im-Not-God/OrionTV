# æ’­æ”¾æºæµ‹é€ŸåŠŸèƒ½å®žçŽ°æ€»ç»“

## ðŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. æ ¸å¿ƒæµ‹é€ŸæœåŠ¡ - `services/speedTest.ts`
- âœ… **è¿žæŽ¥å»¶è¿Ÿæµ‹è¯•**: `testLatency()` - æµ‹è¯•åˆ°æ’­æ”¾æºçš„è¿žæŽ¥å»¶è¿Ÿ
- âœ… **ä¸‹è½½é€Ÿåº¦æµ‹è¯•**: `testDownloadSpeed()` - æµ‹è¯•M3U8æ–‡ä»¶ä¸‹è½½é€Ÿåº¦  
- âœ… **ç»¼åˆæµ‹è¯•**: `testPlaySource()` - åŒæ—¶æµ‹è¯•å»¶è¿Ÿå’Œä¸‹è½½é€Ÿåº¦
- âœ… **å¾—åˆ†è®¡ç®—**: `calculateSourceScore()` - åŸºäºŽæ¸…æ™°åº¦ã€é›†æ•°ã€é€Ÿåº¦ã€å»¶è¿Ÿè®¡ç®—ç»¼åˆå¾—åˆ†
- âœ… **æŽ’åºåŠŸèƒ½**: `sortSourcesByScore()` - æŒ‰å¾—åˆ†å¯¹æ’­æ”¾æºæŽ’åº
- âœ… **ç¼“å­˜æœºåˆ¶**: 10åˆ†é’Ÿç»“æžœç¼“å­˜ï¼Œæå‡æ€§èƒ½

### 2. ä½¿ç”¨ç¤ºä¾‹ - `services/speedTestExamples.ts`
- âœ… å•æºæµ‹è¯•ç¤ºä¾‹
- âœ… æ‰¹é‡æµ‹è¯•ç¤ºä¾‹
- âœ… æ€§èƒ½ç›‘æŽ§ç¤ºä¾‹
- âœ… æŽ’åºç®—æ³•ç¤ºä¾‹

### 3. è®¾ç½®ç•Œé¢ç»„ä»¶ - `components/settings/SpeedTestSettingsSection.tsx`
- âœ… è‡ªåŠ¨æµ‹é€Ÿå¼€å…³
- âœ… è¶…æ—¶æ—¶é—´é…ç½®
- âœ… ç¼“å­˜ç®¡ç†
- âœ… ç®—æ³•è¯´æ˜Ž

## ðŸš€ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### æµ‹é€Ÿç®—æ³•
```typescript
// ç»¼åˆå¾—åˆ†è®¡ç®— (æ€»åˆ†100åˆ†)
- æ¸…æ™°åº¦å¾—åˆ† (40åˆ†): 4K=40, 2K=35, 1080p=30, 720p=25, 480p=15
- é›†æ•°å¾—åˆ† (20åˆ†): æ¯é›†0.5åˆ†ï¼Œæœ€é«˜20åˆ†
- ä¸‹è½½é€Ÿåº¦å¾—åˆ† (25åˆ†): >1MB/s=25, >500KB/s=20, >200KB/s=15
- å»¶è¿Ÿå¾—åˆ† (15åˆ†): <100ms=15, <300ms=12, <500ms=8
```

### æ™ºèƒ½ç¼“å­˜
- ðŸ•’ **ç¼“å­˜æ—¶é•¿**: 10åˆ†é’Ÿ
- ðŸ§  **æ™ºèƒ½ç¼“å­˜**: ç›¸åŒURLç»“æžœå¤ç”¨
- ðŸ”„ **è‡ªåŠ¨æ¸…ç†**: è¿‡æœŸæ¡ç›®è‡ªåŠ¨æ¸…ç†
- ðŸ“Š **ç¼“å­˜ç»Ÿè®¡**: å¯æŸ¥çœ‹ç¼“å­˜ä½¿ç”¨æƒ…å†µ

### è‡ªåŠ¨æŽ’åº
- ðŸ“ˆ **æŒ‰å¾—åˆ†æŽ’åº**: é«˜åˆ†æ’­æ”¾æºä¼˜å…ˆæ˜¾ç¤º
- âš¡ **å®žæ—¶æ›´æ–°**: æµ‹é€Ÿå®ŒæˆåŽç«‹å³é‡æŽ’åº
- ðŸŽ¯ **ç”¨æˆ·å‹å¥½**: æœ€ä¼˜æ’­æ”¾æºè‡ªåŠ¨ç½®é¡¶

## ðŸŽ® ç”¨æˆ·ä½“éªŒ

### è¯¦æƒ…é¡µé¢å¢žå¼º
- âœ… æ’­æ”¾æºè‡ªåŠ¨æµ‹é€Ÿ
- âœ… å®žæ—¶æµ‹é€Ÿè¿›åº¦æ˜¾ç¤º
- âœ… æ‰‹åŠ¨é‡æ–°æµ‹é€ŸæŒ‰é’®
- âœ… å¾—åˆ†ã€å»¶è¿Ÿã€é€Ÿåº¦ä¿¡æ¯æ˜¾ç¤º
- âœ… é¢œè‰²æ ‡è¯† (å¾—åˆ†è“è‰²ã€åˆ†è¾¨çŽ‡ç»¿è‰²ã€é›†æ•°çº¢è‰²)

### è®¾ç½®é¡µé¢
- âœ… æµ‹é€ŸåŠŸèƒ½å¼€å…³
- âœ… è¶…æ—¶æ—¶é—´å¯è°ƒ (3-15ç§’)
- âœ… ç¼“å­˜ç®¡ç†åŠŸèƒ½
- âœ… è¯¦ç»†ç®—æ³•è¯´æ˜Ž

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘å¤„ç†
- ðŸ”„ **å¹¶è¡Œæµ‹è¯•**: å»¶è¿Ÿå’Œä¸‹è½½é€Ÿåº¦åŒæ—¶æµ‹è¯•
- â±ï¸ **è¶…æ—¶æŽ§åˆ¶**: é¿å…é•¿æ—¶é—´ç­‰å¾…
- ðŸ›‘ **å–æ¶ˆæœºåˆ¶**: æ”¯æŒä¸­é€”å–æ¶ˆæµ‹è¯•

### é”™è¯¯å¤„ç†
- ðŸ›¡ï¸ **å®¹é”™è®¾è®¡**: å•ä¸ªæºå¤±è´¥ä¸å½±å“å…¶ä»–æº
- ðŸ“ **é”™è¯¯æ—¥å¿—**: è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯è®°å½•
- ðŸ”„ **é‡è¯•æœºåˆ¶**: ç½‘ç»œå¼‚å¸¸æ—¶è‡ªåŠ¨é‡è¯•

### èµ„æºç®¡ç†
- ðŸ’¾ **å†…å­˜ä¼˜åŒ–**: åˆç†çš„ç¼“å­˜å¤§å°æŽ§åˆ¶
- ðŸ—‘ï¸ **è‡ªåŠ¨æ¸…ç†**: è¿‡æœŸæ•°æ®è‡ªåŠ¨æ¸…ç†
- ðŸ“ˆ **æ€§èƒ½ç›‘æŽ§**: ç¼“å­˜å‘½ä¸­çŽ‡ç»Ÿè®¡

## ðŸ”§ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç”¨æ³•
```typescript
import { testPlaySource, calculateSourceScore } from '@/services/speedTest';

// æµ‹è¯•å•ä¸ªæ’­æ”¾æº
const result = await testPlaySource('https://example.com/video.m3u8');
console.log(result); // { latency: 120, downloadSpeed: 450, isAvailable: true }

// è®¡ç®—å¾—åˆ†
const score = calculateSourceScore(120, 450, "1080p", 24, true);
console.log(score); // 85.5
```

### æ‰¹é‡æµ‹è¯•
```typescript
// å¯¹å¤šä¸ªæ’­æ”¾æºè¿›è¡Œæµ‹é€Ÿå¹¶æŽ’åº
const sources = [...]; // æ’­æ”¾æºæ•°ç»„
const sortedSources = sortSourcesByScore(sources);
```

### é…ç½®é€‰é¡¹
```typescript
// åœ¨è®¾ç½®ä¸­é…ç½®æµ‹é€Ÿå‚æ•°
const settings = {
  speedTest: {
    autoEnabled: true,      // è‡ªåŠ¨æµ‹é€Ÿ
    timeoutSeconds: 8,      // è¶…æ—¶æ—¶é—´
    enableCaching: true,    // å¯ç”¨ç¼“å­˜
    sortByScore: true       // æŒ‰å¾—åˆ†æŽ’åº
  }
};
```

## ðŸŽ¯ å®žé™…æ•ˆæžœ

### ç”¨æˆ·èŽ·å¾—çš„æ”¹è¿›
1. **æ›´å¿«çš„æ’­æ”¾ä½“éªŒ** - è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„æ’­æ”¾æº
2. **æ™ºèƒ½æŽ¨è** - ç»¼åˆè€ƒè™‘ç”»è´¨ã€é€Ÿåº¦ã€å»¶è¿Ÿçš„æœ€ä¼˜é€‰æ‹©
3. **é€æ˜Žçš„ä¿¡æ¯** - ç”¨æˆ·å¯ä»¥çœ‹åˆ°æ¯ä¸ªæºçš„è¯¦ç»†æ€§èƒ½æ•°æ®
4. **ä¸ªæ€§åŒ–è®¾ç½®** - å¯æ ¹æ®ä¸ªäººç½‘ç»œçŽ¯å¢ƒè°ƒæ•´æµ‹é€Ÿå‚æ•°

### å¼€å‘è€…èŽ·å¾—çš„ä¼˜åŠ¿
1. **æ¨¡å—åŒ–è®¾è®¡** - æµ‹é€ŸåŠŸèƒ½ç‹¬ç«‹ï¼Œæ˜“äºŽç»´æŠ¤å’Œæ‰©å±•
2. **å®Œæ•´çš„API** - æä¾›ä¸°å¯Œçš„æµ‹é€Ÿå’ŒæŽ’åºæŽ¥å£
3. **æ€§èƒ½ç›‘æŽ§** - å†…ç½®ç¼“å­˜ç»Ÿè®¡å’Œæ€§èƒ½åˆ†æž
4. **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

## ðŸ”® æ‰©å±•å¯èƒ½æ€§

### åŽç»­å¯ä»¥æ·»åŠ çš„åŠŸèƒ½
- ðŸ“Š **æ€§èƒ½åŽ†å²è®°å½•** - è®°å½•æ’­æ”¾æºçš„åŽ†å²æ€§èƒ½æ•°æ®
- ðŸŒ **åœ°ç†ä½ç½®ä¼˜åŒ–** - æ ¹æ®ç”¨æˆ·åœ°ç†ä½ç½®ä¼˜åŒ–æµ‹é€Ÿç­–ç•¥
- ðŸ¤– **æœºå™¨å­¦ä¹ ** - åŸºäºŽç”¨æˆ·è¡Œä¸ºå­¦ä¹ æœ€ä½³æ’­æ”¾æºé€‰æ‹©
- ðŸ“± **ç½‘ç»œç±»åž‹é€‚é…** - é’ˆå¯¹WiFi/4G/5Gä¸åŒç½‘ç»œç±»åž‹ä¼˜åŒ–
- âš¡ **å®žæ—¶ç›‘æŽ§** - æ’­æ”¾è¿‡ç¨‹ä¸­çš„å®žæ—¶ç½‘ç»œè´¨é‡ç›‘æŽ§

è¿™ä¸ªæµ‹é€ŸåŠŸèƒ½ä¸ºæ‚¨çš„æ’­æ”¾å™¨åº”ç”¨æä¾›äº†å®Œæ•´çš„æ’­æ”¾æºæ€§èƒ½è¯„ä¼°å’Œä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼
